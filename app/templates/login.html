{% set logo_url = url_for('static', filename='img/logo_atualizado.png') %}
<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
</script>
</body>
<title>Login • JSP Automação</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&display=swap" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

<style>
:root{
  /* ===== KNOBS (ajustes rápidos) ===== */
  --logo-width: 400px;

  /* Tema */
  --bg-1:#0c1424; --bg-2:#182a49;
  --brand-blue:#29b6ff; --brand-cyan:#56d4ff;
  --text:#eaf3ff; --muted:#9fb3d6;
  
  /* Botão */
  --button-gradient: linear-gradient(135deg, #29b6ff 0%, #56d4ff 100%);
}

*{box-sizing:border-box}
html,body{height:100%}
body {
  margin:0; font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; color:var(--text);
  background:
    radial-gradient(1200px 800px at 18% 12%, #233a66 0%, transparent 60%),
    radial-gradient(900px 900px at 82% 78%, #0f1f36 0%, transparent 55%),
    linear-gradient(180deg, var(--bg-2), var(--bg-1));
}

.container{min-height:100%; display:grid; place-items:center; padding:48px 20px}
.shell{width:min(1100px,100%); display:grid; grid-template-columns:1.2fr 1fr; gap:36px; align-items:center}
@media (max-width: 960px){ .shell{grid-template-columns:1fr; gap:24px} }

/* ===== LADO DA MARCA ===== */
.brand{position:relative; display:flex; align-items:center; justify-content:center; min-height:380px}
.logo-wrap{position:relative; filter:drop-shadow(0 12px 18px rgba(0,0,0,.45))}
.logo{
  width:min(var(--logo-width), 92vw); height:auto; display:block;
  user-select:none; -webkit-user-drag:none; position:relative; z-index:1;
}

/* glow atrás */
.glow{ position:absolute; inset:-28%; background:radial-gradient(closest-side, var(--brand-orange), transparent 70%); filter:blur(34px); z-index:-1 }

/* ===== LOGO SIMPLES ===== */
.logo{
  width: min(var(--logo-width), 92vw);
  height: auto;
  display: block;
  margin: 0 auto;
  filter: drop-shadow(0 6px 10px rgba(0,0,0,.35)) saturate(1.05) brightness(1.05);
}

/* ===== Card de login ===== */
.card{
  background: rgba(13, 24, 44, .65);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255,255,255,.10);
  box-shadow: 0 18px 52px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.05);
  border-radius:18px; padding:28px;
}
.card h1{ margin:0 0 8px; font-size:28px; font-weight:800; letter-spacing:.3px }
.card p.sub{ margin:0 0 22px; color:var(--muted); font-weight:500 }
.form-row{ display:flex; flex-direction:column; gap:18px }
.field{ position:relative }
.field input{
  width:100%; font:600 15px/1.2 Poppins,sans-serif; color:#eaf3ff;
  background:#0f1f39; border:1px solid rgba(255,255,255,.12);
  border-radius:12px; outline:none; padding:16px 44px 16px 16px;
  transition:border .2s, box-shadow .2s, background .2s;
}
.field input::placeholder{ color:#6f86ab; font-weight:500 }
.field input:focus{ border-color:rgba(86,212,255,.7); box-shadow:0 0 0 3px rgba(41,182,255,.14); background:#102244 }
.eye{
  position:absolute; right:10px; top:50%; transform:translateY(-50%);
  color:#89a7cf; cursor:pointer; padding:6px 8px; border-radius:8px;
}
.eye:hover{ color:#cfe0ff; background:rgba(255,255,255,.06) }
.btn{
  width:100%; padding:14px 16px; border-radius:12px; border:none; cursor:pointer;
  background: var(--button-gradient);
  color: #051328;
  font-weight:900; letter-spacing:.5px; font-size:15px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  transition: transform .2s, box-shadow .2s;
}
.btn:hover{
  transform: scale(1.05);
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.4);
} .btn:active{ transform:translateY(1px) scale(.998) }
.row-actions{ display:flex; justify-content:space-between; align-items:center; margin-top:8px; color:var(--muted); font-size:13px }
.link{ color:var(--brand-cyan); text-decoration:none } .link:hover{ text-decoration:underline }
</style>
</head>
<body>

<div class="container">
  <div class="shell">

    <!-- ===== MARCA ===== -->
    <section class="brand">
      <span class="glow" aria-hidden="true"></span>

      <div class="logo-wrap">
        <!-- Logo simples sem animações -->
        <img class="logo" src="{{ logo_url }}" alt="JSP Automação Industrial e Solar">
      </div>
    </section>

    <!-- ===== CARD LOGIN ===== -->
    <section class="card">
      <h1>Bem-vindo</h1>
      <p class="sub">Faça login para continuar no JSP ERP</p>
      <form action="/login" method="POST" class="form-row" autocomplete="off" novalidate>
        <div class="field">
          <input id="username" name="username" type="text" placeholder="Usuário" required>
        </div>
        <div class="field">
          <input id="senha" name="password" type="password" placeholder="Senha" required>
          <button type="button" class="eye" aria-label="Mostrar/ocultar senha">
            <i class="fa-solid fa-eye"></i>
          </button>
        </div>
        <button class="btn" type="submit">Entrar</button>
        <div class="row-actions">
          <label style="display:flex;align-items:center;gap:8px;">
            <input type="checkbox" name="remember" style="accent-color:var(--brand-cyan);width:16px;height:16px">
            Lembrar de mim
          </label>
          <a class="link" href="/esqueci">Esqueci minha senha</a>
        </div>
      </form>
    </section>

  </div>
</div>

<script>
// Mostrar/ocultar senha
const eyeBtn = document.querySelector('.eye');
const pwd = document.querySelector('#senha');
eyeBtn?.addEventListener('click', ()=>{
  const isPwd = pwd.type === 'password';
  pwd.type = isPwd ? 'text' : 'password';
  eyeBtn.innerHTML = isPwd ? '<i class="fa-solid fa-eye-slash"></i>' : '<i class="fa-solid fa-eye"></i>';
});

// “modo turbo”: acelera animações quando o usuário foca no form
const robot = document.querySelector('.robot');
const panel = document.querySelector('.solar-panel');
document.querySelector('form')?.addEventListener('focusin', ()=>{
  robot.style.animationDuration = '3.6s';
  panel.style.animationDuration = '4.2s';
});
document.querySelector('form')?.addEventListener('focusout', ()=>{
  robot.style.animationDuration = '';
  panel.style.animationDuration = '';
});
</script>
</body>
</html>
