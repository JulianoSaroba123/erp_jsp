<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OS {{ os.codigo }} - JSP ELÉTRICA</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Arial, sans-serif;
            font-size: 12px;
            line-height: 1.4;
            color: #333;
            background: white;
        }
        
        .header {
            text-align: center;
            margin-bottom: 20px;
            padding: 15px;
            border-bottom: 2px solid #333;
        }
        
        .company-logo {
            font-size: 24px;
            font-weight: bold;
            color: #0066cc;
            margin-bottom: 5px;
        }
        
        .company-info {
            font-size: 11px;
            color: #666;
        }
        
        .os-title {
            font-size: 18px;
            font-weight: bold;
            margin: 15px 0;
            text-align: center;
            background: #f0f0f0;
            padding: 10px;
            border: 1px solid #ccc;
        }
        
        .section {
            margin-bottom: 15px;
        }
        
        .section-title {
            background: #e0e0e0;
            padding: 8px;
            font-weight: bold;
            border: 1px solid #ccc;
            margin-bottom: 5px;
        }
        
        .info-row {
            display: flex;
            margin-bottom: 5px;
        }
        
        .info-label {
            font-weight: bold;
            width: 150px;
            padding: 3px 5px;
            background: #f8f8f8;
            border: 1px solid #ddd;
        }
        
        .info-value {
            flex: 1;
            padding: 3px 5px;
            border: 1px solid #ddd;
            border-left: none;
        }
        
        .table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        
        .table th,
        .table td {
            border: 1px solid #ccc;
            padding: 8px;
            text-align: left;
        }
        
        .table th {
            background: #e0e0e0;
            font-weight: bold;
        }
        
        .table td {
            background: white;
        }
        
        .total-row {
            background: #f0f0f0 !important;
            font-weight: bold;
        }
        
        .signatures {
            margin-top: 40px;
            display: flex;
            justify-content: space-between;
        }
        
        .signature-box {
            width: 45%;
            text-align: center;
            border-top: 1px solid #333;
            padding-top: 10px;
        }
        
        .text-area {
            border: 1px solid #ccc;
            padding: 8px;
            min-height: 60px;
            margin-top: 5px;
            background: white;
        }
        
        .page-break {
            page-break-before: always;
        }
        
        .footer {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            text-align: center;
            font-size: 10px;
            color: #666;
            border-top: 1px solid #ccc;
            padding: 5px;
            background: white;
        }
        
        @media print {
            .page-break {
                page-break-before: always;
            }
        }
    </style>
</head>
<body>
    <!-- Cabeçalho -->
    <div class="header">
        <div class="company-logo">JSP ELÉTRICA</div>
        <div class="company-info">
            Juliano Saroba Pereira - Eletricista<br>
            Telefone: (15) 99999-9999 | E-mail: jsp.eletrica@email.com
        </div>
    </div>

    <!-- Título da OS -->
    <div class="os-title">
        ORDEM DE SERVIÇO Nº {{ os.codigo }}
    </div>

    <!-- Dados Básicos -->
    <div class="section">
        <div class="section-title">DADOS BÁSICOS</div>
        
        <div class="info-row">
            <div class="info-label">Código:</div>
            <div class="info-value">{{ os.codigo }}</div>
        </div>
        
        <div class="info-row">
            <div class="info-label">Data de Emissão:</div>
            <div class="info-value">{{ os.data_emissao.strftime('%d/%m/%Y') if os.data_emissao else 'N/A' }}</div>
        </div>
        
        <div class="info-row">
            <div class="info-label">Previsão Conclusão:</div>
            <div class="info-value">{{ os.previsao_conclusao.strftime('%d/%m/%Y') if os.previsao_conclusao else 'N/A' }}</div>
        </div>
        
        <div class="info-row">
            <div class="info-label">Status:</div>
            <div class="info-value">{{ os.status or 'N/A' }}</div>
        </div>
        
        <div class="info-row">
            <div class="info-label">Prioridade:</div>
            <div class="info-value">{{ os.prioridade or 'N/A' }}</div>
        </div>
    </div>

    <!-- Dados do Cliente -->
    <div class="section">
        <div class="section-title">DADOS DO CLIENTE</div>
        
        <div class="info-row">
            <div class="info-label">Cliente:</div>
            <div class="info-value">{{ os.cliente.nome if os.cliente else 'N/A' }}</div>
        </div>
        
        <div class="info-row">
            <div class="info-label">Solicitante:</div>
            <div class="info-value">{{ os.solicitante or 'N/A' }}</div>
        </div>
        
        <div class="info-row">
            <div class="info-label">Contato:</div>
            <div class="info-value">{{ os.contato or 'N/A' }}</div>
        </div>
    </div>

    <!-- Equipamento -->
    <div class="section">
        <div class="section-title">EQUIPAMENTO</div>
        
        <div class="info-row">
            <div class="info-label">Nome:</div>
            <div class="info-value">{{ os.equipamento_nome or 'N/A' }}</div>
        </div>
        
        <div class="info-row">
            <div class="info-label">Marca:</div>
            <div class="info-value">{{ os.equipamento_marca or 'N/A' }}</div>
        </div>
        
        <div class="info-row">
            <div class="info-label">Modelo:</div>
            <div class="info-value">{{ os.equipamento_modelo or 'N/A' }}</div>
        </div>
        
        <div class="info-row">
            <div class="info-label">Número de Série:</div>
            <div class="info-value">{{ os.equipamento_numero_serie or 'N/A' }}</div>
        </div>
    </div>

    <!-- Descrição do Problema -->
    <div class="section">
        <div class="section-title">DESCRIÇÃO DO PROBLEMA</div>
        <div class="text-area">
            {{ os.problema_descrito or 'Nenhuma descrição informada.' }}
        </div>
    </div>

    <!-- Serviços Realizados -->
    {% if servicos and servicos|length > 0 %}
    <div class="section">
        <div class="section-title">SERVIÇOS REALIZADOS</div>
        <table class="table">
            <thead>
                <tr>
                    <th>Serviço</th>
                    <th>Quantidade</th>
                    <th>Valor Total</th>
                </tr>
            </thead>
            <tbody>
                {% for servico in servicos %}
                <tr>
                    <td>{{ servico.nome }}</td>
                    <td>{{ servico.quantidade }}</td>
                    <td>R$ {{ "%.2f"|format(servico.valor_total or 0) }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% endif %}

    <!-- Produtos Utilizados -->
    {% if produtos and produtos|length > 0 %}
    <div class="section">
        <div class="section-title">PRODUTOS UTILIZADOS</div>
        <table class="table">
            <thead>
                <tr>
                    <th>Produto</th>
                    <th>Quantidade</th>
                    <th>Valor Unit.</th>
                    <th>Valor Total</th>
                </tr>
            </thead>
            <tbody>
                {% for produto in produtos %}
                <tr>
                    <td>{{ produto.nome }}</td>
                    <td>{{ produto.quantidade }}</td>
                    <td>R$ {{ "%.2f"|format(produto.valor_unitario or 0) }}</td>
                    <td>R$ {{ "%.2f"|format(produto.valor_total or 0) }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% endif %}

    <!-- Serviço Realizado -->
    <div class="section">
        <div class="section-title">DESCRIÇÃO DO SERVIÇO REALIZADO</div>
        <div class="text-area">
            {{ os.descricao_servico_realizado or 'Nenhuma descrição informada.' }}
        </div>
    </div>

    <!-- Dados de Execução -->
    <div class="section">
        <div class="section-title">DADOS DE EXECUÇÃO</div>
        
        <div class="info-row">
            <div class="info-label">Técnico Responsável:</div>
            <div class="info-value">{{ os.tecnico_responsavel or 'N/A' }}</div>
        </div>
        
        <div class="info-row">
            <div class="info-label">Hora Início:</div>
            <div class="info-value">{{ os.hora_inicio.strftime('%H:%M') if os.hora_inicio else 'N/A' }}</div>
        </div>
        
        <div class="info-row">
            <div class="info-label">Hora Término:</div>
            <div class="info-value">{{ os.hora_termino.strftime('%H:%M') if os.hora_termino else 'N/A' }}</div>
        </div>
        
        <div class="info-row">
            <div class="info-label">Total de Horas:</div>
            <div class="info-value">{{ os.total_horas or 'N/A' }}</div>
        </div>
    </div>

    <!-- Valores -->
    <div class="section">
        <div class="section-title">VALORES</div>
        
        <div class="info-row">
            <div class="info-label">Mão de Obra:</div>
            <div class="info-value">R$ {{ "%.2f"|format(os.valor_mao_obra or 0) }}</div>
        </div>
        
        <div class="info-row">
            <div class="info-label">Produtos:</div>
            <div class="info-value">R$ {{ "%.2f"|format(os.valor_produtos or 0) }}</div>
        </div>
        
        <div class="info-row">
            <div class="info-label">Serviços:</div>
            <div class="info-value">R$ {{ "%.2f"|format(os.valor_servicos or 0) }}</div>
        </div>
        
        <div class="info-row">
            <div class="info-label">Deslocamento:</div>
            <div class="info-value">R$ {{ "%.2f"|format(os.valor_deslocamento or 0) }}</div>
        </div>
        
        <div class="info-row">
            <div class="info-label">Descontos:</div>
            <div class="info-value">R$ {{ "%.2f"|format(os.valor_descontos or 0) }}</div>
        </div>
        
        <div class="info-row total-row">
            <div class="info-label"><strong>TOTAL:</strong></div>
            <div class="info-value"><strong>R$ {{ "%.2f"|format(os.valor_total or 0) }}</strong></div>
        </div>
    </div>

    <!-- Condições de Pagamento -->
    <div class="section">
        <div class="section-title">PAGAMENTO</div>
        
        <div class="info-row">
            <div class="info-label">Forma de Pagamento:</div>
            <div class="info-value">{{ os.forma_pagamento or 'N/A' }}</div>
        </div>
        
        <div class="info-row">
            <div class="info-label">Condições:</div>
            <div class="info-value">{{ os.condicoes_pagamento or 'N/A' }}</div>
        </div>
        
        {% if os.data_vencimento %}
        <div class="info-row">
            <div class="info-label">Data de Vencimento:</div>
            <div class="info-value">{{ os.data_vencimento.strftime('%d/%m/%Y') }}</div>
        </div>
        {% endif %}
    </div>

    <!-- Assinaturas -->
    <div class="signatures">
        <div class="signature-box">
            <div>Técnico Responsável</div>
            <div style="margin-top: 30px;">{{ os.tecnico_responsavel or 'Juliano Saroba Pereira' }}</div>
        </div>
        <div class="signature-box">
            <div>Cliente</div>
            <div style="margin-top: 30px;">{{ os.cliente.nome if os.cliente else '_________________________' }}</div>
        </div>
    </div>

    <!-- Rodapé -->
    <div class="footer">
        JSP ELÉTRICA - Ordem de Serviço
    </div>
</body>
</html>
