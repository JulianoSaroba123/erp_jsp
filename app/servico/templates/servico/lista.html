{% extends 'base.html' %}
{% block titulo %}Lista de Serviços - JSP ERP{% endblock %}

{% block content %}
<style>
    .stats-card {
        background: linear-gradient(135deg, #dc3545, #bd2130);
        color: white;
        border-radius: 10px;
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: 0 2px 12px #dc354533;
        border: 1.5px solid #dc3545;
    }
    .table th {
        background-color: #dc3545;
        color: white;
        border: none;
    }
    .table, .table td, .table tr {
        border-color: #dc3545 !important;
    }
    .badge-unidade {
        background-color: #6c757d;
        color: white;
        padding: 0.3em 0.6em;
        border-radius: 0.25rem;
        font-size: 0.8em;
    }
    .valor-destaque {
        font-weight: bold;
        color: #dc3545;
        font-size: 1.1em;
    }
    .text-servico {
        color: #fff!important;
    }
    .btn-servico {
        background: linear-gradient(135deg, #dc3545, #b71c1c);
        color: #fff;
        border: none;
        font-weight: 600;
    }
    .btn-servico:hover, .btn-servico:focus {
        background: linear-gradient(135deg, #b71c1c, #dc3545);
        color: #fff;
    }
    .table-servico th {
        background: linear-gradient(135deg, #f8d7da, #f5c6cb);
        border-color: #dc3545;
        color: #b71c1c;
        font-weight: 600;
    }
</style>

<div class="container mt-4">
    <!-- Estatísticas -->
    <div class="row mb-4">
        <div class="col-md-3">
            <div class="stats-card text-center">
                <i class="fas fa-concierge-bell fa-2x mb-2"></i>
                <h4>{{ total_servicos|default(servicos|length if servicos is defined else 0) }}</h4>
                <p class="mb-0">Total de Serviços</p>
            </div>
        </div>
        <div class="col-md-3">
            <div class="stats-card text-center">
                <i class="fas fa-money-bill-wave fa-2x mb-2"></i>
                <h4>R$ {{ "%.2f"|format(servicos|sum(attribute='valor')) }}</h4>
                <p class="mb-0">Valor Total</p>
            </div>
        </div>
    </div>
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h3 class="text-danger">
            <i class="fas fa-concierge-bell"></i> Lista de Serviços
        </h3>
        <a href="{{ url_for('servico.novo_servico') }}" class="btn btn-danger">Novo Serviço</a>
    </div>
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Código</th>
                <th>Nome</th>
                <th>Valor</th>
                <th>Unidade</th>
                <th>Ações</th>
            </tr>
        </thead>
        <tbody>
            {% for servico in servicos %}
            <tr>
                <td>{{ servico.codigo }}</td>
                <td>{{ servico.nome }}</td>
                <td>R$ {{ "%.2f"|format(servico.valor) }}</td>
                <td>{{ servico.unidade }}</td>
                <td>
                    <a href="{{ url_for('servico.editar_servico', id=servico.id) }}" class="btn btn-sm btn-warning">Editar</a>
                    <form action="{{ url_for('servico.excluir_servico', id=servico.id) }}" method="post" style="display:inline;">
                        <button type="submit" class="btn btn-sm btn-danger">Excluir</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
